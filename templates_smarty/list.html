<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Chivalry Server Browser</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="header">
  <h1 class="contents"><a href="./">Chivalry: Medieval Warfare Server Browser</a></h1>
</div>

{if $data->serverList !== null}
<div class="section">
  <div class="heading">
    <form id="form1" name="form1" method="get" action="">
      <h2 class="contents">
        <label>Servers in
          <select name="country" id="country">
            
            {foreach from=$data->countryCodeAssoc key=key item=value}
            <option value="{$key}"{if $key == $data->targetCountryCode} selected="selected"{/if}>{$value}</option>
            {/foreach}
            
          </select>
        </label>
        <input type="submit" name="browseButton" id="browseButton" value="Browse" />
      </h2>
    </form>
  </div>
  <div class="contents">
    <div class="contentBody">
      <table class="serverList">
        <tr>
          <th colspan="3" align="left" scope="col">Server Name</th>
          <th align="center" scope="col">Players</th>
          <th align="left" scope="col">Map Name</th>
          <th align="left" scope="col">IP</th>
          <th scope="col">JOIN</th>
        </tr>
        
        {foreach from=$data->serverList item=record name=serverlist}
        {if $record.server_name === null}{continue}{/if}
        <tr>
          <td align="right">{$smarty.foreach.serverlist.iteration}</td>
          <td>{$record.country}</td>
          <td><a href="?serverId={$record.game_server_id}">{$record.server_name}</a></td>
          <td align="center">{$record.number_of_players} / <span class="maxPlayers">{$record.max_players}</span></td>
          <td align="left" class="mapName">{$record.map_name}</td>
          <td align="left" class="ip">{$record.ip}:{$record.query_port}</td>
          <td align="center"><a href="steam://run/219640/en/{$record.ip}:{$record.game_port}">JOIN</a></td>
        </tr>
        {/foreach}

      </table>
      
      {if !$data->serverList}
      <p>No Servers</p>
      {/if}
      
    </div>
  </div>
</div>
{/if}

{if $data->serverInfo !== null}
<div class="section">
  <div class="heading">
    <h2 class="contents">Players in {$data->serverInfo.server_name} (<a href="steam://run/219640/en/{$data->serverInfo.ip}:{$data->serverInfo.game_port}">JOIN</a>)</h2>
  </div>
  <div class="contents">
    <div class="contentBody">
      <table class="playerList">
        <tr>
          <th align="left" scope="col">Player Name</th>
          <th align="right" scope="col">Score</th>
          <th align="right" scope="col">Duration</th>
        </tr>
        
        {foreach from=$data->serverInfo.players item=record}
        <tr>
          <td>{$record.player_name}</td>
          <td align="right">{$record.player_score}</td>
          <td align="right">{$record.player_connection_time}</td>
        </tr>
        {/foreach}

      </table>
      
      {if !$data->serverInfo.players}
      <p>No Players</p>
      {/if}
      
    </div>
  </div>
</div>
{/if}

<div class="contents" id="footer">
  <p>&copy; 2013 KAZUMiX (<a href="https://twitter.com/KAZUMiX" target="_blank">Twitter</a> / <a href="https://github.com/VJ-KAZUMiX" target="_blank">GitHub</a> / <a href="http://steamcommunity.com/id/KAZUMiX" target="_blank">Steam</a>)</p>
  <p>This product includes GeoLite data created by MaxMind, available from <a href="http://www.maxmind.com" target="_blank">http://www.maxmind.com</a>.</p>
</div>
</body>
</html>
